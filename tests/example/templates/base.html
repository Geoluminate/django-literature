{% load static i18n %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Django Literature</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"
            defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
            integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>
    {% block extra_head %}{% endblock %}
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Django Literature</a>
        <button class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
                aria-expanded="false"
                aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0 w-100">
            <li class="nav-item">
              <a class="nav-link" href="{% url "literature-list" %}">{% trans "Literature" %}</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url "name-list" %}">{% trans "Contributors" %}</a>
            </li>
            <li class="nav-item ms-auto">
              <a class="btn btn-secondary" href="{% url 'admin:index' %}">{% trans "Admin Site" %}</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container py-3">
      {% block content %}
      {% endblock content %}
    </div>
    {% comment %} <div class="citation-js">Q21972834</div> {% endcomment %}
    {% comment %} <div class="mb-3">
          <label for="exampleInputDOI" class="form-label">DOI</label>
          <input type="text" class="form-control" id="inputDOI" aria-describedby="doiHelp">
          <div id="doiHelp" class="form-text">Input a DOI to get started</div>
        </div>
        <button type="button" onclick="fetchReference()"  class="btn btn-primary mb-3">Search</button>
      <hr>
      <input type="file" onchange="readFileContents(event)" />


      <button type="button" onclick="submit()"  class="btn btn-primary mb-3">Submit</button>

      <div id='response'></div>
    <div id='preview'></div> {% endcomment %}
    {% comment %} <div class="citation-js" data-input="10.1038/s41598-023-32403-z" data-output-format="citation" data-output-template="apa">This text can now be ignored</div> {% endcomment %}
    {% comment %} </div>     {% endcomment %}
    {% comment %} <script src="{% static 'literature/js/main.js' %}"></script> {% endcomment %}
    {% comment %} <script>
        const Cite = require('citation-js')

        var data;

        function updatePreview(data) {
          document.getElementById("preview").innerHTML = data.format('bibliography', {
            format: 'html',
            template: 'apa',
            lang: "{{ lang_code }}"
          })
          document.getElementById("preview").innerHTML = data.format('data')
        }

        async function readFileContents(e) {
          const file = e.target.files.item(0)
          const content = await file.text();
          data = await Cite.Cite(content)
          updatePreview(data)
        }

        async function getData(lookup) {
          data = await Cite.Cite(lookup)
          updatePreview(data)
        };

        function fetchReference() {
          getData(document.getElementById('inputDOI').value)
        };

    </script> {% endcomment %}
    {% block js %}
    {% endblock js %}
  </body>
</html>
